<html class="no-js" xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:th="http://www.thymeleaf.org" 
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"/>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<link rel="stylesheet" href="css/style.css"/>
</head>
<body>
    <div th:if="${session.email != null}">
           <script>
               window.location.href='dashboard'; 
          </script>
     </div>
    <div class="container">
        <div class="card-l  card-container">
            <img id="profile-img" class="profile-img-card" src="img/Gossip-Line- Logo.jpg" />
            <p id="profile-name" class="profile-name-card"></p>
            <form class="form-signin" id="sign_in">
                <span id="reauth-email" class="reauth-email"></span>
                  <input type="email" id="inputEmail" class="form-control" placeholder="Enter Email" autofocus/>
                  <input type="password" id="inputPassword" class="form-control" placeholder="Enter Password">
                  <button class="btn btn-lg btn-primary" type="submit">Sign in</button>
            </form>
        </div>
    </div>
 <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
 <script type="text/javascript">
 
$('#sign_in').submit(function(e){
    e.preventDefault();
    
    var data={
   		      	email:$('#inputEmail').val(),
   	          	password:$('#inputPassword').val()
             }
       
        $.ajax({
   	       
        	url:"login",
   	        type:"POST",
   	        dataType:"json",
   	        data:data,
   	        success:function(data,textStatus,jqXHR)
   	        {
   	        	
   	          console.log(data.status);	
   	    	  if(data.status)
   	          {
    	    		 window.location.href='dashboard';  
   	    		
   	    	  }
   	    	  else 
   	    	  {
   	    		    Swal.fire({
   	    			  icon:'error',
   	    			  title:'Password Wrong',
   	    			  text:"Something went wrong",
   	    			  footer:'',
   	    			  timer:3500
   	    			 }) 
   	    		  	
   	    	  }    
   	    	    
   	    },
   	    error:function(e)
   	    {
   	    	console.log("error in pages");
   	    }
      
   	     
    }); 
});

</script>
</body>
</html>